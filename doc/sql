-- mysql
create table note
(
	id int not null auto_increment
		primary key,
	content varchar(500) not null,
	type int(2) not null,
	title varchar(30) not null
)
;
create table note_properties
(
	id int not null auto_increment
		primary key,
	oid int not null,
	nid int not null,
	status int(2) not null,
	createtime varchar(20) not null,
	modifytime varchar(20) null,
	constraint note_properties_operator_id_fk
		foreign key (oid) references qnote.operator (id),
	constraint note_properties_note_id_fk
		foreign key (nid) references qnote.note (id)
)
;
alter table note_properties
	add constraint note_properties_operator_id_fk
		foreign key (oid) references qnote.operator (id)
;
create index note_properties_note_id_fk
	on note_properties (nid)
;

create index note_properties_operator_id_fk
	on note_properties (oid)
;


create table operator
(
	id int not null auto_increment
		primary key,
	username varchar(50) not null,
	password varchar(200) not null,
	role int(2) not null,
	createtime timestamp default CURRENT_TIMESTAMP not null,
	uid int not null,
	status int(2) not null
)
;
alter table operator
	add constraint operator_user_id_fk
		foreign key (uid) references qnote.user (id)
;
create index operator_user_id_fk
	on operator (uid)
;

create table role
(
	id int not null auto_increment
		primary key,
	name varchar(10) not null
)
;

create table user
(
	id int not null auto_increment
		primary key,
	img varchar(50) null,
	mail varchar(20) null,
	name varchar(20) null,
	sex int(2) null,
	tel varchar(20) null
)
;





-- sqllite-------------------------
CREATE TABLE note
(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    content NVARCHAR(500),
    type INT DEFAULT 1 NOT NULL,
    title NVARCHAR(20)
);
CREATE TABLE note_properties
(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    oid INTEGER NOT NULL,
    nid INTEGER NOT NULL,
    status INT,
    createtime VARCHAR(20),
    modifytime VARCHAR(20),
    CONSTRAINT note_properties_operator_id_fk FOREIGN KEY (oid) REFERENCES operator (id),
    CONSTRAINT note_properties_note_id_fk FOREIGN KEY (nid) REFERENCES note (id)
);
CREATE TABLE operator
(
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    username VARCHAR(50),
    password VARCHAR(200),
    role INT,
    createtime DATETIME,
    uid INTEGER,
    name varchar(50),
    status INT,
    CONSTRAINT operator_user_id_fk FOREIGN KEY (uid) REFERENCES user (id)
);
CREATE UNIQUE INDEX operator_username_uindex ON operator (username);
CREATE TABLE user
(
    id bigint PRIMARY KEY NOT NULL,
    img varchar(50),
    mail varchar(20),
    name varchar(20),
    sex integer,
    tell varchar(20)
);