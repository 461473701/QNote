-- mysql

create table user
(
	id int not null auto_increment
		primary key,
	img varchar(50) null,
	mail varchar(20) null,
	name varchar(20) null,
	sex int(2) null,
	tel varchar(20) null
)
;

create table operator
(
	id int not null auto_increment
		primary key,
	username varchar(50) not null,
	password varchar(200) not null,
	role int(2) not null,
	createtime timestamp default CURRENT_TIMESTAMP not null,
	uid int not null,
	status int(2) not null
)
;
alter table operator
	add constraint operator_user_id_fk
		foreign key (uid) references user (id)
;
create index operator_user_id_fk
	on operator (uid)
;

create table role
(
	id int not null auto_increment
		primary key,
	name varchar(10) not null
)
;
create table note
(
	id int not null auto_increment
		primary key,
	content varchar(500) not null,
	type int(2) not null,
	title varchar(30) not null
);
create table note_properties
(
	id int not null auto_increment
		primary key,
	oid int not null,
	nid int not null,
	status int(2) not null,
	createtime varchar(20) not null,
	modifytime varchar(20) null,
	constraint note_properties_operator_id_fk
		foreign key (oid) references operator (id),
	constraint note_properties_note_id_fk
		foreign key (nid) references note (id)
);
alter table note_properties
	add constraint note_properties_operator_id_fk
		foreign key (oid) references operator (id)
;
create index note_properties_note_id_index
	on note_properties (nid)
;

create index note_properties_operator_id_index
	on note_properties (oid)
;